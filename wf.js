(function(e){function t(e,t,n,o){try{var r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");e=e.toUpperCase(),r.timeout=500,"GET"==e?(r.open("GET",t+"?"+n,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(null)):"POST"==e?(r.open("POST",t,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),"object"==typeof n&&(n=JSON.stringify(n)),r.send(n)):console.error("请传入合法的请求方式"),r.onreadystatechange=function(){4==r.readyState&&200==r.status&&(r.responseXML?o(r.responseXML):o(r.responseText))}}catch(e){console.log(e)}}function n(t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,n)}var o={performance:e.webkitPerformance?e.webkitPerformance:e.performance,host:"km323.das.366ec.net",getTiming:function(){if(!o.performance)return{};var e=o.performance.timing;return{load:e.loadEventEnd-e.fetchStart,dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,redirect:e.redirectEnd-e.redirectStart,cache:Math.max(e.domainLookupStart-e.fetchStart,0),ready:e.fetchStart-e.navigationStart,ttfb:e.responseStart-e.navigationStart,active:e.domInteractive-e.navigationStart,request:e.responseStart-e.requestStart,response:e.responseEnd-e.responseStart,network:e.responseEnd-e.navigationStart,domReady:e.domComplete-e.domInteractive,initDomTree:e.domInteractive-e.responseEnd,dom:e.domComplete-e.domLoading,events:e.loadEventEnd-e.loadEventStart,unloadEvent:e.unloadEventEnd-e.unloadEventStart,total:(e.loadEventEnd||e.loadEventStart||e.domComplete||e.domLoading)-e.navigationStart}},resourceDetail:!1,getResources:function(){if(!o.performance)return[];for(var e=this.performance.getEntries(),t=[],n=e.length,r=n-1;r>0;r--){var a={},i=e[r];"resource"==i.entryType&&(a.name=i.name,a.response=i.responseEnd-i.requestStart,a.connect=i.connectEnd-i.connectStart,a.duration=i.duration,a.type=i.initiatorType,t.push(a))}return t},getResourceCount:function(){if(!o.performance)return{};for(var e=this.performance.getEntries(),t=e.length,n={},r=t-1;r>0;r--){var a=e[r];if("resource"==a.entryType){var i=n[a.initiatorType]||{total:0,count:0};i.total+=a.duration,i.count+=1,n[a.initiatorType]=i}}return n},getNavigator:function(){var e=window.navigator;if(!e)return{};var t={userAgent:e.userAgent,appName:e.appName,appCodeName:e.appCodeName,appVersion:e.appVersion,appMinorVersion:e.appMinorVersion,platform:e.platform,cookieEnabled:e.cookieEnabled,language:e.language,deviceMemory:e.deviceMemory};try{var n=e.connection;n&&(t.downlink=n.downlink,t.effectiveType=n.effectiveType,t.rtt=n.rtt,t.saveData=n.saveData)}catch(e){console.warn(e)}return t},getUuid:function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var o=e.join("");return o},getBaseInfo:function(){document.getElementById("js_performance");var t=this.getUuid(),n=new Date,r={uuid:t,appKey:"wfc",referrer:e.document.referrer,host:e.location.hostname,pageKey:e.location.pathname,pageTitle:document.title,parameter:e.location.search,url:e.location.pathname,terminal:"browser",version:"3.2.3.0",viewTime:n.getTime(),toUrl:"",leaveTime:0,delay:0,year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate(),hour:n.getHours(),minute:n.getMinutes()};if(o.performance){var a=o.performance.navigation,i=o.performance.timing;i.startLoadTime=i.navigationStart,i.redirectCount=a.redirectCount,i.loadMethod=a.type}return r},getCookie:function(){var e=document.cookie;e=e.replace(/\./g,"_");for(var t=e.split("; "),n={},o=0;o<t.length;o++){var r=t[o].split("=");n[r[0]]=r[1]}return n},getPageInfo:function(){var e=document.getElementById("_page_identify_"),t="";return e&&(t=e.value),t},getResolution:function(){return{clientWidth:document.body.clientWidth,clientHeight:document.body.clientHeight,availWidth:window.screen.availWidth,availHeight:window.screen.availHeight,colorDepth:window.screen.colorDepth,deviceXDPI:window.screen.deviceXDPI,screenWidth:window.screen.width,screenHeight:window.screen.height}},pushPerformance:function(){setTimeout(function(){var n=o.getBaseInfo();return n.timing=o.getTiming(),n.resources=o.resourceDetail?o.getResources():o.getResourceCount(),n.navigator=o.getNavigator(),n.resolution=o.getResolution(),n.page=o.getPageInfo(),t("POST",o.getProtocol()+"://"+o.host+"/ppc",n,function(t){e.wcf_id=t}),n},50)},getProtocol:function(){return window.location.protocol.indexOf("s")>0?"https":"http"}};n("load",o.pushPerformance)})(window);